---
title: "Next.jsでブログを作る方法"
thumbnail: 🏃‍♂️
date: "2025-03-11"
excerpt: "Next.jsとApp Routerを使った個人ブログの作り方について解説します。"
tags: ["Next.js", "React", "Markdown"]
---

# Next.jsでブログを作る方法

Next.jsのApp Routerを使用してブログを構築する方法を詳しく紹介します。

## App Routerの特徴

App Routerは従来のPages Routerと比較して以下のような特徴があります。

- **Reactの最新機能に対応**（Server Components, Suspense, Streamingなど）
- **レイアウトの簡単な共有**（`layout.tsx` を活用）
- **ネストされたルーティング**（フォルダ構造を活用）
- **ローディング状態の改善**（`loading.tsx` の活用）

これらを活用することで、より柔軟でパフォーマンスの良いアプリケーションを構築できます。

## プロジェクトのセットアップ

まず、Next.jsのプロジェクトを作成します。

```sh
npx create-next-app@latest my-blog --experimental-app
cd my-blog
npm install
```

このコマンドを実行すると、App Routerを活用したNext.jsのプロジェクトが作成されます。

## ルーティングの設定

ブログ記事ページを作成するには、`app` フォルダの下に `[slug]/page.tsx` を作成します。

```tsx
import { notFound } from "next/navigation";

export default function BlogPost({ params }: { params: { slug: string } }) {
  const post = getPostBySlug(params.slug);
  
  if (!post) {
    return notFound();
  }

  return (
    <article>
      <h1>{post.title}</h1>
      <div dangerouslySetInnerHTML={{ __html: post.content }} />
    </article>
  );
}
```

`getPostBySlug` はマークダウンの記事を取得するための関数で、詳細は次の「マークダウンの使い方」で説明します。

## マークダウンの使い方

ブログ記事はMarkdownで管理できます。`gray-matter`と`remark`を使用して、MarkdownをHTMLに変換しましょう。

### 必要なパッケージをインストール

```sh
npm install gray-matter remark remark-html
```

### マークダウンの変換処理

`lib/posts.ts` を作成し、マークダウンの読み込み関数を実装します。

```ts
import fs from "fs";
import path from "path";
import matter from "gray-matter";
import { remark } from "remark";
import html from "remark-html";

const postsDirectory = path.join(process.cwd(), "posts");

export function getPostBySlug(slug: string) {
  const filePath = path.join(postsDirectory, `${slug}.md`);
  if (!fs.existsSync(filePath)) return null;

  const fileContents = fs.readFileSync(filePath, "utf8");
  const { data, content } = matter(fileContents);
  const processedContent = remark().use(html).processSync(content).toString();

  return {
    title: data.title,
    content: processedContent,
  };
}
```

これにより、`posts` フォルダに保存したMarkdownファイルをブログ記事として表示できます。

### Markdownのサンプル

```markdown
---
title: "My First Post"
date: "2025-03-10"
---

# はじめに

これは最初の投稿です。

**太字のテキスト** も書けますし、

- リスト項目1
- リスト項目2

のようにリストも書けます。
```

## コードのシンタックスハイライト

ブログ記事内でコードブロックを使いたい場合、Next.jsの組み込み機能や`prism-react-renderer`を活用できます。

### Prismを使ったコードハイライト

```sh
npm install prism-react-renderer
```

### コードブロックコンポーネント

```tsx
import { Prism as SyntaxHighlighter } from "react-syntax-highlighter";
import { oneDark } from "react-syntax-highlighter/dist/cjs/styles/prism";

export default function CodeBlock({ language, children }: { language: string; children: string }) {
  return (
    <SyntaxHighlighter language={language} style={oneDark}>
      {children}
    </SyntaxHighlighter>
  );
}
```

### 使用例

```tsx
<CodeBlock language="javascript">
{`
function hello() {
  console.log("Hello, world!");
}
`}
</CodeBlock>
```

## 画像の追加

`next/image` を使用すると、最適化された画像を簡単に追加できます。

```tsx
import Image from "next/image";

export default function BlogImage() {
  return <Image src="/my-image.jpg" alt="ブログの画像" width={600} height={400} />;
}
```

## まとめ

Next.jsのApp Routerを使うことで、最新のReact機能を活用しつつ、シンプルで高速なブログサイトを構築できます。

- App Routerの基本を理解
- マークダウンで記事を管理
- コードブロックや画像の追加

これらを活用して、自分だけのブログを作ってみましょう！
