---
title: "Next.jsã§ãƒ–ãƒ­ã‚°ã‚’ä½œã‚‹æ–¹æ³•"
thumbnail: ğŸƒâ€â™‚ï¸
date: "2025-03-11"
excerpt: "Next.jsã¨App Routerã‚’ä½¿ã£ãŸå€‹äººãƒ–ãƒ­ã‚°ã®ä½œã‚Šæ–¹ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚"
tags: ["Next.js", "React", "Markdown"]
---

# Next.jsã§ãƒ–ãƒ­ã‚°ã‚’ä½œã‚‹æ–¹æ³•

Next.jsã®App Routerã‚’ä½¿ç”¨ã—ã¦ãƒ–ãƒ­ã‚°ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’è©³ã—ãç´¹ä»‹ã—ã¾ã™ã€‚

## App Routerã®ç‰¹å¾´

App Routerã¯å¾“æ¥ã®Pages Routerã¨æ¯”è¼ƒã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚

- **Reactã®æœ€æ–°æ©Ÿèƒ½ã«å¯¾å¿œ**ï¼ˆServer Components, Suspense, Streamingãªã©ï¼‰
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ç°¡å˜ãªå…±æœ‰**ï¼ˆ`layout.tsx` ã‚’æ´»ç”¨ï¼‰
- **ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**ï¼ˆãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã‚’æ´»ç”¨ï¼‰
- **ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®æ”¹å–„**ï¼ˆ`loading.tsx` ã®æ´»ç”¨ï¼‰

ã“ã‚Œã‚‰ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚ŠæŸ”è»Ÿã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è‰¯ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

ã¾ãšã€Next.jsã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

```sh
npx create-next-app@latest my-blog --experimental-app
cd my-blog
npm install
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€App Routerã‚’æ´»ç”¨ã—ãŸNext.jsã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã¾ã™ã€‚

## ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è¨­å®š

ãƒ–ãƒ­ã‚°è¨˜äº‹ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€`app` ãƒ•ã‚©ãƒ«ãƒ€ã®ä¸‹ã« `[slug]/page.tsx` ã‚’ä½œæˆã—ã¾ã™ã€‚

```tsx
import { notFound } from "next/navigation";

export default function BlogPost({ params }: { params: { slug: string } }) {
  const post = getPostBySlug(params.slug);
  
  if (!post) {
    return notFound();
  }

  return (
    <article>
      <h1>{post.title}</h1>
      <div dangerouslySetInnerHTML={{ __html: post.content }} />
    </article>
  );
}
```

`getPostBySlug` ã¯ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®è¨˜äº‹ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®é–¢æ•°ã§ã€è©³ç´°ã¯æ¬¡ã®ã€Œãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®ä½¿ã„æ–¹ã€ã§èª¬æ˜ã—ã¾ã™ã€‚

## ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®ä½¿ã„æ–¹

ãƒ–ãƒ­ã‚°è¨˜äº‹ã¯Markdownã§ç®¡ç†ã§ãã¾ã™ã€‚`gray-matter`ã¨`remark`ã‚’ä½¿ç”¨ã—ã¦ã€Markdownã‚’HTMLã«å¤‰æ›ã—ã¾ã—ã‚‡ã†ã€‚

### å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```sh
npm install gray-matter remark remark-html
```

### ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®å¤‰æ›å‡¦ç†

`lib/posts.ts` ã‚’ä½œæˆã—ã€ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®èª­ã¿è¾¼ã¿é–¢æ•°ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

```ts
import fs from "fs";
import path from "path";
import matter from "gray-matter";
import { remark } from "remark";
import html from "remark-html";

const postsDirectory = path.join(process.cwd(), "posts");

export function getPostBySlug(slug: string) {
  const filePath = path.join(postsDirectory, `${slug}.md`);
  if (!fs.existsSync(filePath)) return null;

  const fileContents = fs.readFileSync(filePath, "utf8");
  const { data, content } = matter(fileContents);
  const processedContent = remark().use(html).processSync(content).toString();

  return {
    title: data.title,
    content: processedContent,
  };
}
```

ã“ã‚Œã«ã‚ˆã‚Šã€`posts` ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã—ãŸMarkdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ–ãƒ­ã‚°è¨˜äº‹ã¨ã—ã¦è¡¨ç¤ºã§ãã¾ã™ã€‚

### Markdownã®ã‚µãƒ³ãƒ—ãƒ«

```markdown
---
title: "My First Post"
date: "2025-03-10"
---

# ã¯ã˜ã‚ã«

ã“ã‚Œã¯æœ€åˆã®æŠ•ç¨¿ã§ã™ã€‚

**å¤ªå­—ã®ãƒ†ã‚­ã‚¹ãƒˆ** ã‚‚æ›¸ã‘ã¾ã™ã—ã€

- ãƒªã‚¹ãƒˆé …ç›®1
- ãƒªã‚¹ãƒˆé …ç›®2

ã®ã‚ˆã†ã«ãƒªã‚¹ãƒˆã‚‚æ›¸ã‘ã¾ã™ã€‚
```

## ã‚³ãƒ¼ãƒ‰ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ

ãƒ–ãƒ­ã‚°è¨˜äº‹å†…ã§ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ã„ãŸã„å ´åˆã€Next.jsã®çµ„ã¿è¾¼ã¿æ©Ÿèƒ½ã‚„`prism-react-renderer`ã‚’æ´»ç”¨ã§ãã¾ã™ã€‚

### Prismã‚’ä½¿ã£ãŸã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ©ã‚¤ãƒˆ

```sh
npm install prism-react-renderer
```

### ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```tsx
import { Prism as SyntaxHighlighter } from "react-syntax-highlighter";
import { oneDark } from "react-syntax-highlighter/dist/cjs/styles/prism";

export default function CodeBlock({ language, children }: { language: string; children: string }) {
  return (
    <SyntaxHighlighter language={language} style={oneDark}>
      {children}
    </SyntaxHighlighter>
  );
}
```

### ä½¿ç”¨ä¾‹

```tsx
<CodeBlock language="javascript">
{`
function hello() {
  console.log("Hello, world!");
}
`}
</CodeBlock>
```

## ç”»åƒã®è¿½åŠ 

`next/image` ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€æœ€é©åŒ–ã•ã‚ŒãŸç”»åƒã‚’ç°¡å˜ã«è¿½åŠ ã§ãã¾ã™ã€‚

```tsx
import Image from "next/image";

export default function BlogImage() {
  return <Image src="/my-image.jpg" alt="ãƒ–ãƒ­ã‚°ã®ç”»åƒ" width={600} height={400} />;
}
```

## ã¾ã¨ã‚

Next.jsã®App Routerã‚’ä½¿ã†ã“ã¨ã§ã€æœ€æ–°ã®Reactæ©Ÿèƒ½ã‚’æ´»ç”¨ã—ã¤ã¤ã€ã‚·ãƒ³ãƒ—ãƒ«ã§é«˜é€Ÿãªãƒ–ãƒ­ã‚°ã‚µã‚¤ãƒˆã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

- App Routerã®åŸºæœ¬ã‚’ç†è§£
- ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã§è¨˜äº‹ã‚’ç®¡ç†
- ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚„ç”»åƒã®è¿½åŠ 

ã“ã‚Œã‚‰ã‚’æ´»ç”¨ã—ã¦ã€è‡ªåˆ†ã ã‘ã®ãƒ–ãƒ­ã‚°ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼
